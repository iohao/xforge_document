# 资源存储最佳实践

## 原则

- 不允许跨UI引用资源，比如PopTip使用PageHome中的图片资源。
- 在快速迭代期(或者叫项目前期)，尽量不要过多的考虑通用资源划分问题，这会成为累赘。
- **需要完全了解Bundle中资源的引用关系** ，相关文档 - [CocosCreator的优先级原则](https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E4%BC%98%E5%85%88%E7%BA%A7)。

## 最佳实践

1. 一些小icon，即便个别页面都有使用，也不要放入公共资源目录中，除非你确定它真的能在接下来的迭代中保持通用。

> 合图之后一般并不会对加载性能造成什么影响

2. UI资源的引用关系要符合原则，不然即便在预览时是完全正常的，构建后运行也大概率会报错(这是CocosCreator的运行机制)。

> 一定要符合规范，不要嫌麻烦，它几乎可以杜绝UI被频繁迭代后，出现的资源引用关系及其混乱的问题。

3. 动画、大图片、字体或大量的icon等才需要考虑存放到公共资源目录中，一定要放到 **优先级>4的AssetBundle** 中。

> - 简便做法，把除了脚本外的公共资源直接放到resources里面就可以了。
> - cocos的main包处理资源引擎比较特殊，尽量不要在main包中存放除了脚本之外的资源。
    (⚠️非脚本资源放到main包中, 在构建后会导致资源被拷贝到其它Bundle中)

4. 通用的脚本资源可以放到主包内，比如`res-native(通过菜单App创建的默认文件夹)`或其它非Bundel文件夹中。

> - 这种情况下在构建后代码会位于main包中，如果代码量大需要注意是否会影响你游戏的启动速度。

5. 通用的脚本资源也可以放在Bundle中，比如`res-bundle(通过菜单App创建的默认文件夹)`或其它Bundel文件夹中， **需要保证在使用它之前已经通过loadBundle对它进行了加载** (可以是assetManager.loadBundle或app.manager.loader.loadBundle)。

> - 这种情况需要特别注意，如果是小游戏环境，Bundle必须配置为小游戏分包。

## 一般做法图示

![一般做法](https://foruda.gitee.com/images/1735737889884901471/49c1502c_542337.png "QQ20250101-212415.png")